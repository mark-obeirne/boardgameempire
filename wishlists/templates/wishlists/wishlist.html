{% extends "base.html" %}

{% load static %}

{% block content %}
<h1>My Wishlist</h1>
<div class="row">
{% if wishlisted_products %}
    {% for product in wishlisted_products %}
     <div class="col s12 hide-on-med-and-up">
        <div class="card">
            <div class="card-image">
            <img src="images/sample-1.jpg">
            </div>
            <div class="card-content">
                <h2>{{ product.name }}</h2>
                {% if product.on_sale %}
                    <p><s>{{ product.price }}</s> {{ product.sale_price }}</p>
                {% else %}
                    <p>€{{ product.price }}</p>
                {% endif %}
            </div>
            <div class="card-action center-align">
                <a href="{% url 'product_detail' product.id %}" class="waves-effect waves-light btn"><i class="fas fa-eye prefix"></i> More Details</a>
                {% if product.inventory > 0 %}
                    <a href="#" class="waves-effect waves-light btn">Add to Cart</a>
                {% else %}
                    <a href="#" class="waves-effect waves-light btn disabled">Out of Stock</a>
                {% endif %}
                <form class="form" method="POST" action="{% url 'remove_from_wishlist' product.id %}">
                {% csrf_token %}
                    <input type="submit" class="waves-effect waves-light btn" value="Remove from Wishlist">
                    <input type="hidden" name="redirect_url" value="{{ request.path }}">
                </form>
            </div>
        </div>
    </div>
    <div class="col m8 offset-m2 hide-on-small-only">
        <div class="card horizontal">
            <div class="card-image">
            <img src="images/sample-1.jpg">
            </div>
            <div class="card-stacked">
                <div class="card-content">
                    <h2><a href="{% url 'product_detail' product.id %}">{{ product.name }}</a></h2>
                    {% if product.on_sale %}
                        <p><s>{{ product.price }}</s> {{ product.sale_price }}</p>
                    {% else %}
                        <p>€{{ product.price }}</p>
                    {% endif %}
                </div>
                <div class="card-action center-align">
                    <a href="{% url 'product_detail' product.id %}" class="waves-effect waves-light btn"><i class="fas fa-eye prefix"></i> More Details</a>
                    {% if product.inventory > 0 %}
                        <a href="#" class="waves-effect waves-light btn">Add to Cart</a>
                    {% else %}
                        <a href="#" class="waves-effect waves-light btn disabled">Out of Stock</a>
                    {% endif %}
                    <form class="form" method="POST" action="{% url 'remove_from_wishlist' product.id %}">
                    {% csrf_token %}
                        <input type="submit" class="waves-effect waves-light btn" value="Remove from Wishlist">
                        <input type="hidden" name="redirect_url" value="{{ request.path }}">
                    </form>
                </div>
            </div>
        </div>
    </div>    
{% endfor %}
{% else %}
    <p>Your wishlist is currently empty.</p>
    <a href="#" class="waves-effect waves-light btn">Browse products  <i class="fas fa-caret-square-right prefix"></i></a>
{% endif %}
</div>
<div class="col s12 center-align">
    <form class="form" method="POST" action="{% url 'delete_wishlist' %}">
    {% csrf_token %}
        <input type="submit" class="waves-effect waves-light btn" value="Delete Wishlist">
        <input type="hidden" name="redirect_url" value="{{ request.path }}">
    </form>
</div>
{% endblock %}